{% extends "base.html" %}

{% block content %}
    <!-- Dashboard Overview -->
    <div class="row ticket-stats">
        <div class="col-md-3">
            <div class="card text-center clickable" data-status="OPEN">
                <div class="card-body">
                    <h5 class="card-title">Open Tickets</h5>
                    <p class="card-text h3">{{ open_tickets }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center clickable" data-status="IN_PROGRESS">
                <div class="card-body">
                    <h5 class="card-title">In Progress</h5>
                    <p class="card-text h3">{{ in_progress_tickets }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center clickable" data-status="PENDING">
                <div class="card-body">
                    <h5 class="card-title">Pending</h5>
                    <p class="card-text h3">{{ pending_tickets }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center clickable" data-status="RESOLVED">
                <div class="card-body">
                    <h5 class="card-title">Resolved</h5>
                    <p class="card-text h3">{{ resolved_tickets }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <a href="/tickets/new" class="btn btn-primary">Create New Ticket</a>
        <a href="/tickets" class="btn btn-secondary">View All Tickets</a>
    </div>
{% endblock %}

{% block extra_js %}
<script>
    document.querySelectorAll('.clickable').forEach(card => {
        card.addEventListener('click', function() {
            const status = this.dataset.status;
            window.location.href = "{{ url_for('main.list_tickets') }}?status=" + status;
        });
    });
</script>
{% endblock %}

